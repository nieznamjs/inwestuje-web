<div class="form-container">
  <mat-card class="form-card">
    <h2>
      Inwestu.je (logo, czy coś)
    </h2>

    <mat-horizontal-stepper linear>
      <mat-step label="Dane">
        <form class="form" [formGroup]="registerForm">
          <mat-form-field class="field">
            <label>
              <input matInput type="email" placeholder="E-mail" formControlName="email" required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'email').hasError('required')">
              E-mail jest wymagany
            </mat-error>

            <mat-error *ngIf="getFormControl(registerForm, 'email').hasError('email')">
              To nie wygląda jak e-mail
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field">
            <label>
              <input matInput type="password" placeholder="Hasło" formControlName="password" required #password>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'password').hasError('required')">
              Hasło jest wymagane
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field-alt">
            <label>
              <input
                matInput
                type="password"
                placeholder="Potwierdź hasło"
                formControlName="confirmPassword"
                [pattern]="password.value"
                required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'confirmPassword').hasError('required')">
              Potwierdzenie hasła jest wymagane
            </mat-error>

            <mat-error *ngIf="getFormControl(registerForm, 'confirmPassword').hasError('pattern')">
              Hasła nie są takie same
            </mat-error>
          </mat-form-field>

          <mat-button-toggle-group formControlName="accountType" class="field-alt toggle-group">
            <mat-button-toggle value="private" class="toggle-btn">
              Osoba prywatna
            </mat-button-toggle>

            <mat-button-toggle value="company" class="toggle-btn">
              Firma
            </mat-button-toggle>
          </mat-button-toggle-group>

          <mat-form-field class="field" *ngIf="getFormControl(registerForm, 'accountType').value === 'private'">
            <label>
              <input
                matInput
                type="text"
                placeholder="Imię"
                formControlName="name"
                required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'name').hasError('required')">
              Imię jest wymagane
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field" *ngIf="getFormControl(registerForm, 'accountType').value === 'private'">
            <label>
              <input
                matInput
                type="text"
                placeholder="Nazwisko"
                formControlName="lastName"
                required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'lastName').hasError('required')">
              Nazwisko jest wymagane
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field" *ngIf="getFormControl(registerForm, 'accountType').value === 'company'">
            <label>
              <input
                matInput
                type="text"
                placeholder="Nazwa firmy"
                formControlName="companyName"
                required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'companyName').hasError('required')">
              Nazwa firmy jest wymagana
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field" *ngIf="getFormControl(registerForm, 'accountType').value === 'company'">
            <label>
              <input
                matInput
                type="text"
                placeholder="NIP (same cyfry)"
                formControlName="nip"
                required>
            </label>

            <mat-error *ngIf="getFormControl(registerForm, 'nip').hasError('required')">
              NIP jest wymagany
            </mat-error>

            <mat-error *ngIf="getFormControl(registerForm, 'nip').hasError('pattern')">
              To nie wygląda jak NIP
            </mat-error>
          </mat-form-field>

          <div class="field-alt">
            <mat-button-toggle-group formControlName="roles" multiple class="toggle-group">
              <mat-button-toggle *ngFor="let role of rolesData" [value]="role" class="toggle-btn">
                {{ role }}
              </mat-button-toggle>
            </mat-button-toggle-group>

            <mat-error class="error" *ngIf="getFormControl(registerForm, 'roles').hasError('required')">
              Rola jest wymagana
            </mat-error>
          </div>

          <button class="btn" matStepperNext mat-raised-button color="primary">
            Dalej
          </button>
        </form>
      </mat-step>

      <mat-step label="Płatności" [stepControl]="paymentForm">
        <form [formGroup]="paymentForm" (ngSubmit)="onSubmitPaymentData()">
          <mat-form-field class="field">
            <label>
              <input
                class="payu-card-number"
                matInput
                type="text"
                placeholder="Numer karty"
                formControlName="cardNumber"
                required>
            </label>

            <mat-error *ngIf="getFormControl(paymentForm, 'cardNumber').hasError('required')">
              Numer karty jest wymagany
            </mat-error>
          </mat-form-field>

          <mat-form-field class="field">
            <label>
              <input
                class="payu-card-cvv"
                matInput
                type="text"
                placeholder="Kod CVV2/CVC2"
                formControlName="cvv"
                required>
            </label>

            <mat-error *ngIf="getFormControl(paymentForm, 'cvv').hasError('required')">
              Kod CVV2/CVC2 jest wymgany
            </mat-error>
          </mat-form-field>

          <div class="card-exp-wrapper">
            <mat-form-field class="field">
              <label>
                <input
                  class="payu-card-expm"
                  matInput
                  type="text"
                  placeholder="Miesiąc ważności karty"
                  formControlName="expMonth"
                  required>
              </label>

              <mat-error *ngIf="getFormControl(paymentForm, 'expMonth').hasError('required')">
                Miesiąc jest wymagany
              </mat-error>
            </mat-form-field>

            <span class="card-exp-divider">
              /
            </span>

            <mat-form-field class="field">
              <label>
                <input
                  class="payu-card-expy"
                  matInput
                  type="text"
                  placeholder="Rok ważności karty"
                  formControlName="expYear"
                  required>
              </label>

              <mat-error *ngIf="getFormControl(paymentForm, 'expYear').hasError('required')">
                Rok jest wymagany
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-alt">
            <mat-checkbox class="payu-agreement" color="primary" formControlName="agreement">
              Zapisując dane karty akceptuję regulamin i chcę jej używać do kolejnych płatności
            </mat-checkbox>

            <mat-error *ngIf="getFormControl(paymentForm, 'agreement').hasError('requiredTrue')">
              Zgoda jest wymagana
            </mat-error>
          </div>

          <button class="btn" mat-raised-button matStepperNext color="primary">
            Dalej
          </button>
        </form>
      </mat-step>
    </mat-horizontal-stepper>

    <p>Posiadasz już konto? <a routerLink="/login">Zaloguj się!</a></p>
  </mat-card>
</div>

<app-auth-sidebar class="sidebar"></app-auth-sidebar>
